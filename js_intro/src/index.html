<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie-edge">
    <title>Javascript Intro</title>
</head>
<body>

    <h2>JavaScript: Day 4</h2>
    <p>Async, Await, and Promises</p>

<script class="index">

// Promises

// const pokePromise = fetch('https://pokeapi.co/api/v2/pokemon/ditto/')

// other code here
// console.log(pokePromise)

// pokePromise.then(data => data.json())
//            .then(data => console.log(data))
//            .catch(err => console.error(err))


// navigator.geolocation.getCurrentPosition(function (pos) {
//     console.log('it worked!');
//     console.log(pos)},
//     function (err) {
//         console.error(err);})


function getCurrentPosition(...args) {
    return new Promise((resolve, reject) => {
        navigator.geolocation.getCurrentPosition(...args, resolve, reject);
    });
}

async function somethingelse() {
    console.log('starting');
    const pos = await getCurrentPosition();
    console.log(pos);
    console.log('finished');
}

console.log('going...');
somethingelse();
console.log('after go');



async function getGithubData() {
    console.log('entered getdate')
    const p1 = fetch('https://api.github.com/users/greg-smith1');
    const p2 = fetch('https://api.github.com/users/redcartel');
    const res = await Promise.all([p1, p2]);//promise.all() will wait for the p1 and p2 to resolve bfore it move to ne next code
    const dataPromises = res.map(r => r.json());
    const [greg, carter] = await Promise.all(dataPromises)
    console.log(greg, carter)
}

console.log('getting...')
getGithubData()
console.log('after getting call')

</script>

</body>
</html>